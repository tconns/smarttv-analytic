<!DOCTYPE html>
<html lang="en">
  <head>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-1JJF66DMPF"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-1JJF66DMPF");
      console.log(window, window.gaGlobal)
      gtag("get", "G-1JJF66DMPF", "client_id", function(client_id){
        console.log(client_id)
      });
      // Lắng nghe sự kiện message từ parent
        window.addEventListener('message', function(event) {
          try {
              // Kiểm tra xem event.data có phải là một chuỗi không
              if (typeof event.data === 'string') {
                  var data = JSON.parse(event.data);
                  if (data.event === 'analytic') {
                    gtag('event', 'analytic', {
                        'event_category': 'analytic_category',  // Thay thế bằng tên danh mục bạn muốn
                        'event_label': 'analytic_label',        // Thay thế bằng nhãn bạn muốn
                        'value': data.data                  // Dữ liệu bạn muốn truyền
                    });
                  }
              } else {
                  console.log('Data: Not a string');
              }
          } catch (error) {
              console.log('Data: Error', error);
          }
        });
    </script>
  </head>
  <body>
  </body>
</html>
